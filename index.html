<!DOCTYPE html>
<html>
	<head>
		<title>Draggable</title>
		<meta charset="UTF-8" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
		<script  src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"   integrity="sha256-xI/qyl9vpwWFOXz7+x/9WkG5j/SVnSw21viy8fWwbeE="   crossorigin="anonymous"></script>
		<link rel="stylesheet" type="text/css" href="draggable.css">
	</head>
	
	<body>
		<main id="main"></main>
		<section id="msgs"></section>
		
		<script>
		var id = 0;
			$(document).ready(function(){
				$("main").click(function(event){
					var div = document.createElement('div');
					div.className = "draggable";
					div.id  = id.toString();
					div.innerHTML = "hello";
					document.getElementById("msgs").appendChild(div, document.body.firstChild);
					$( "#" + id.toString() ).css({
																'position' :  "absolute", 
																'top' : (event.pageY.toString() + "px"), 
																'left' : (event.pageX.toString() + "px"), 
																'background-color' : "white", 
																'padding' : "5px", 
																'z-index' : "5"
																});
					$( "#" + id.toString() ).attr("data-status", "text");
					$( "#" + id.toString() ).draggable().dblclick(function(event){
						if($("#" + event.target.id).attr("data-status") == "input")
							return;
						var txt = event.target.innerHTML;
						event.target.innerHTML = "<input type='text' data-parent='" + event.target.id + "' onkeypress='toText(event)' value ='" + txt + "'>";
						$("#" + event.target.id).attr("data-status" , "input");
					});
					id++;
				});

			});
			
			function toText(event){
					if(event.keyCode == 13){
						$("#" + $(event.target).attr("data-parent") ).innerHTML = "<p>hello</p>" ;
						$("#" + $(event.target).attr("data-parent") ).attr("data-status", "text");
						//$(event.target).val() 
					}
				}
		</script>
		
	</body>
</html>
			